<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- SEO Meta Tags -->
    <meta name="description" content="{% block meta_description %}NormScout Scout every norm your product needs instantly. AI powered compliance and legal requirements discovery.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}compliance, product norms, legal requirements, AI{% endblock %}">

    <!-- Page Title -->
    <title>{% block title %}NormScout{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/img/logo_icon.svg">

    <!-- Resource hints for faster loading -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Open Graph -->
    <meta property="og:title" content="{% block og_title %}NormScout{% endblock %}" />
    <meta property="og:description" content="{% block og_description %}Scout every norm your product needs instantly{% endblock %}" />
    <meta property="og:url" content="https://normscout.ch{% block og_url %}/{% endblock %}" />
    <meta property="og:image" content="https://normscout.ch/img/logo_1200_630.png" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="NormScout" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="{% block twitter_title %}NormScout{% endblock %}" />
    <meta name="twitter:description" content="{% block twitter_description %}Scout every norm your product needs instantly{% endblock %}" />
    <meta name="twitter:image" content="https://normscout.ch/img/logo_1200_630.png" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="/style.css">
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="/" aria-label="NormScout Home">
                        <img src="/img/full_logo.svg" alt="NormScout" class="logo-svg">
                    </a>
                </div>
                <nav class="nav" id="nav" aria-label="Main navigation">
                    {% block nav_links %}
                    <a href="/investors" class="nav-link">Investors</a>
                    <a href="/contact" class="nav-link">Contact</a>
                    <a href="/#demo" class="nav-link btn btn-accent">Try Now</a>
                    {% endblock %}

                    <!-- Login Button (shown when not logged in) -->
                    <button id="loginBtn" class="btn btn-primary" onclick="showLoginModal()" style="display: inline-block;" aria-label="Sign in to NormScout">
                        Sign In
                    </button>

                    <!-- User Dropdown (shown when logged in) -->
                    <div id="userDropdown" class="user-dropdown" style="display: none;">
                        <button class="user-menu-btn" onclick="toggleUserMenu()" aria-label="User menu" aria-expanded="false">
                            <img id="userAvatar" src="" alt="User" class="user-avatar">
                            <span id="userEmail">Loading...</span>
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 11L3 6h10l-5 5z"/>
                            </svg>
                        </button>
                        <div id="userMenu" class="user-menu">
                            <a href="/dashboard" class="user-menu-item">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M2 2h5v5H2V2zm7 0h5v5H9V2zM2 9h5v5H2V9zm7 0h5v5H9V9z"/>
                                </svg>
                                Dashboard
                            </a>
                            <a href="/dashboard#account" class="user-menu-item">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M8 8a3 3 0 100-6 3 3 0 000 6zm-5 6a5 5 0 0110 0H3z"/>
                                </svg>
                                Account
                            </a>
                            <hr class="user-menu-divider">
                            <button onclick="signOut()" class="user-menu-item user-menu-button">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                    <path d="M6 14V2M2 8l4-4m0 8l-4-4m8-6h4v12h-4"/>
                                </svg>
                                Sign Out
                            </button>
                        </div>
                    </div>
                </nav>
                <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation menu" aria-expanded="false">
                    <span></span><span></span><span></span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <img src="/img/full_logo.svg" alt="NormScout" class="footer-logo-svg">
                </div>
                <div class="footer-links">
                    <a href="/privacy" target="_blank" rel="noopener noreferrer" class="footer-link">Privacy Policy</a>
                    <a href="/terms" target="_blank" rel="noopener noreferrer" class="footer-link">Terms of Service</a>
                    <a href="/contact" target="_blank" rel="noopener noreferrer" class="footer-link">Contact</a>
                    <a href="/investors" class="footer-link">Investors</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 NormScout</p>
            </div>
        </div>
    </footer>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="hideLoginModal()" aria-label="Close login modal">&times;</button>
            <div class="modal-header">
                <h2>Sign in to NormScout</h2>
                <p>Save your workspaces and access them from anywhere</p>
            </div>
            <div class="modal-body">
                <button class="btn btn-oauth btn-google" onclick="loginWithGoogle()" aria-label="Sign in with Google">
                    <svg width="18" height="18" viewBox="0 0 18 18">
                        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
                        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332C2.438 15.983 5.482 18 9 18z"/>
                        <path fill="#FBBC05" d="M3.964 10.707c-.18-.54-.282-1.117-.282-1.707 0-.593.102-1.17.282-1.709V4.958H.957C.347 6.173 0 7.548 0 9s.348 2.827.957 4.042l3.007-2.335z"/>
                        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0 5.482 0 2.438 2.017.957 4.958L3.964 7.29C4.672 5.163 6.656 3.58 9 3.58z"/>
                    </svg>
                    Continue with Google
                </button>
                <button class="btn btn-oauth btn-github" onclick="loginWithGitHub()" aria-label="Sign in with GitHub">
                    <svg width="18" height="18" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    Continue with GitHub
                </button>
            </div>
            <div class="modal-footer">
                <p class="modal-footer-text">By signing in, you agree to our Terms of Service and Privacy Policy</p>
            </div>
        </div>
    </div>

    <!-- Base Scripts -->
    <script src="/auth.js" defer></script>
    <script src="/tracking.js" defer></script>
    {% block extra_scripts %}{% endblock %}
</body>
</html>
